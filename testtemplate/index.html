<html>
<head>
  <meta charset="utf-8">
</head>
<body>
	<div id="types"></div>
	<div id="statistics"></div>
	<div id="states"></div>

	<script type="text/template" id="template_statistics">
		<h1>Statistics</h1>
	</script>

	<script type="text/template" id="template_types">
		<h1 onClick="toggleTypes(this)">Listened to in project</h1>
		<div class="types" style="display: none;">
			<% _.each(types, function(type) { %>
				<div class="type">
					<h3>
						Type: <%- type.type %> <br>
						Events: 
						<% _.each(type.events, function(event) { %>
							<%- event %>, 
						<% }); %>
					</h3>
				</div>
			<% }); %>
		</div>
	</script>

	<script type="text/template" id="template_states">
		<% _.each(states, function(state) { %>
			<div class="state">
				<div class="header" onClick="toggleState(this)">
					<h1><%- state.url %></h1>
					<h3>
						Elements: <%- state.count.seen %>, 
						Elements tested here: <%- state.count.tested %>, 
						Elements tested global: <%- state.count.tested_global %> <br>
						Percentage here: <%- state.percentage.here %>%, 
						Percentage global: <%- state.percentage.global %>%
					</h3>
				</div>
				<div class="content" style="display: none;">
					<div class="types">
						<% _.each(state.types, function(type) { %>
							<h5>
								Type: <%- type.type %> <br>
								Count: <%- type.seen %> <br>
								Here: <%- type.here %> <br>
								Global: <%- type.global %> 
							</h5>
						<% }); %>
					</div>

					<% _.each(state.elements, function(elem) { %>
						<div onClick="toggleElement(this, 'ul')">
							<p>
								Tested: <%- elem.tested %>, Type: <%- elem.type %> <br>
								Percentage here <strong><%- elem.percentage.here %></strong>%
								Percentage global <strong><%- elem.percentage.global %></strong>% <br>
							</p>

							<ul style="display: none;">
								<li>
									Element<br>
									<%- elem.element %>
								</li>
								<li>
									Element type<br>
									<%- elem.type %>
								</li>
								<li>
									Tested<br>
									<%- elem.tested %>
								</li>
								<li>
									Hash<br>
									<%- elem.hash %>
								</li>
								<li>
									Events seen here<br>
									<% _.each(elem.events, function(event) { %>
										<i>'<%- event %>'</i> 
									<% }); %>
								</li>
								<li>
									Events not seen here<br>
									<% _.each(elem.eventsStats.unseen, function(event) { %>
										<i>'<%- event %>'</i> 
									<% }); %>
								</li>
								<li>
									Events seen global<br>
									<% _.each(elem.eventsStats.seen_global, function(event) { %>
										<i>'<%- event %>'</i> 
									<% }); %>
								</li>
								<li>
									Events not seen global<br>
									<% _.each(elem.eventsStats.unseen_global, function(event) { %>
										<i>'<%- event %>'</i> 
									<% }); %>
								</li>
							</ul>
						</div>
						<hr>
					<% }); %>
				</div>
			</div>
		<% }); %>
	</script>

	<script type="text/template" id="config"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
	<script src="script.js"></script>
</body>
</html>